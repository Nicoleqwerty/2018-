<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/300104 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="526"/>

<div>
<span><div><div>华师day03_pm</div><div><br/></div><div><br/></div><div>一、ServletContext</div><div>          ①：Servlet引擎为每个Web应用程序都创建一个对应的ServletContext对象，ServletContext对象被包含在ServletConfig对象中，调用ServletConfig.getServletContext方法可以返回ServletContext对象的引用。</div><div>        ②：由于一个Web应用程序中所有的Servlet都共享同一个ServletContext对象，所以，ServletContext对象被称之为application对象（Web应用程序对象）。</div><div>        ③：功能：</div><div>                a、<span style="color: rgb(227, 0, 0);">获取Web应用程序的初始化参数</span> </div><div>                        Web应用的初始化参数的配置与servlet节点并列                        </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;</span><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(63, 127, 127);">web-app</span><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span></div><div style="min-height: 14pt;"><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(51, 51, 51);">      </span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 95, 191);">&lt;!--配置当前Web应用的初始化参数  --&gt;</span></div><div style="min-height: 14pt;"><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(51, 51, 51);">      </span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 127, 127);">context-param</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span></div><div style="min-height: 14pt;"><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(51, 51, 51);">           </span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 127, 127);">param-name</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas;">db</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;/</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 127, 127);">param-name</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span></div><div style="min-height: 14pt;"><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(51, 51, 51);">           </span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 127, 127);">param-value</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;mysql5.7</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;/</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(63, 127, 127);">param-value</span><span style="min-height: 14pt; font-size: 10pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span></div><div><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(51, 51, 51);">      </span><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(0, 128, 128);">&lt;/</span><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(63, 127, 127);">context-param</span><span style="font-size: 10pt; min-height: 14pt; font-family: Consolas; color: rgb(0, 128, 128);">&gt;</span></div></div><div>                  ServletContext获取初始化参数方法：</div><div>                      getInitParameter(String name) ： 获取指定参数名的初始化参数</div><div>                      getInitParameterNames（）：获取参数名组成的Enumeration</div><div> 二、我们访问的web应用程序  是tomcat服务  下 webapps目录中的</div><div>三、各个类及接口之间的关系</div><div>         <img src="https://img-blog.csdn.net/20160331192521134?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></img><img src="华师day03_pm_files/Image.png" type="image/png" data-filename="Image.png" width="499"/></div><div>四、通过继承HttpServlet的方式创建自己的Servlet对象   重写方法  doGet  和 doPost方法来处理对应的业务</div><div><font style="color: rgb(156, 0, 76);"><b>    httpServlet:</b></font></div><div><span>    </span>如果需要在处理请求的时候（service方法中）处理http相关内容，如：获取请求的方式是get还是post，则需要将参数 ServletRequest 强制转换为 HttpServletRequest 进行处理。</div><div>        可以定义一个针对于Http协议的一个Servlet基类，将service方法中参数转换为HttpServletRequest 和 HttpServletResponse。并且可以根据请求方式区分业务处理。----HttpServlet可以实现该功能，实际开发中，使用HttpServlet作为基类。</div><div>        总结：</div><div>                ①：是一个Servlet，继承自GenericServlet，针对Http协议所制定。</div><div>                ②：在Service方法中，直接把ServletRequest和ServletResponse 转换为HttpServletRequest 和 HttpServletResponse，并调用了重载的service(HttpServletRequest , HttpServletResponse)</div><div>                ③：在service(HttpServletRequest , HttpServletResponse)中获取了请求方式，request.getMethod(),根据请求方式，创建了对应的方法：doGet  和 doPost</div><div>                ④：<font style="color: rgb(227, 0, 0);"><b>实际开发中，直接继承HttpServlet，</b></font>并根据请求方式复写doXXX方法，直接使用HttpServletRequest 和 HttpServletResponse不需要再强转。</div><div><br/></div><div>五、<span style="min-height: 17pt; font-size: 15pt; background: rgb(232, 242, 254); color: rgb(63, 127, 95); font-family: Consolas;"> 请求对象request的常用方法</span></div><div>        </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">String</span> <span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62);">path</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">=</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62);">request</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">.</span><span style="min-height: 17pt; font-family: Consolas; background: rgb(212, 212, 212); color: rgb(51, 51, 51);">getContextPath</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">();//获得上下文路径</span></font></div><div><font style="font-size: 12pt;"><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">String</span> <span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62);">uri</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">=</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62);">request</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">.getRequestURI(); //获得这个<span style="min-height: 17pt; font-family: Consolas; color: rgb(63, 127, 95); background: rgb(232, 242, 254);">请求的路径</span></span></font></div><div><font style="font-size: 12pt;"><span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62); background: rgb(232, 242, 254);">request</span><span style="min-height: 17pt; font-family: Consolas; background: rgb(232, 242, 254); color: rgb(63, 127, 95);">.getRequestDispatcher(</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(42, 0, 255); background: rgb(232, 242, 254);">&quot;/show.html&quot;</span><span style="min-height: 17pt; font-family: Consolas; background: rgb(232, 242, 254); color: rgb(63, 127, 95);">).forward(</span><span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62); background: rgb(232, 242, 254);">request</span><span style="min-height: 17pt; font-family: Consolas; background: rgb(232, 242, 254); color: rgb(63, 127, 95);">,</span> <span style="min-height: 17pt; font-family: Consolas; color: rgb(106, 62, 62); background: rgb(232, 242, 254);">response</span><span style="min-height: 17pt; font-family: Consolas; background: rgb(232, 242, 254); color: rgb(63, 127, 95);">);//转发到别的页面显示。</span></font></div></div><div><br/></div><div>    ①. <span style="color: rgb(227, 0, 0); font-weight: bold;">获取请求参数:</span></div><div>        &gt; <span style="color: rgb(227, 0, 0);">String getParameter(String name): 根据请求参数的名字, 返回参数值.</span></div><div><span style="color: rgb(227, 0, 0);">            若请求参数有多个值(例如 checkbox), 该方法只能获取到第一个提交的值.</span></div><div>        &gt; String[] getParameterValues(String name): 根据请求参数的名字, 返回请求参数对应的字符串数组.    </div><div>        &gt; Enumeration getParameterNames(): 返·回参数名对应的 Enumeration 对象,</div><div>            类似于 ServletConfig(或 ServletContext) 的 getInitParameterNames() 方法.</div><div>        &gt; Map getParameterMap(): 返回请求参数的键值对: key: 参数名,  value: 参数值, String 数组类型.</div><div><br/></div><div>    ②. 获取请求的 URI:</div><div>        HttpServletRequest httpServletRequest = (<span style="color: rgb(123, 0, 61);">HttpServletRequest</span>) request;        </div><div>        String requestURI = httpServletRequest.getRequestURI();</div><div>        System.out.println(requestURI); <span style="color: rgb(50, 135, 18);">//  /day_29/loginServlet</span></div><div><br/></div><div>    ③. 获取请求方式:</div><div>         String method = httpServletRequest.getMethod();</div><div>         System.out.println(method); <span style="color: rgb(50, 135, 18);">//GET </span>   </div><div><br/></div><div>    ④. 若是一个 GET 请求, 获取请求参数对应的那个字符串, 即 ? 后的那个字符串.</div><div>         String queryString = httpServletRequest.getQueryString();</div><div>         System.out.println(queryString); <span style="color: rgb(50, 135, 18);">//user=zhu&amp;password=123456&amp;interesting=game&amp;interesting=party&amp;interesting=shopping</span></div><div><br/></div><div>    ⑤. 获取请求的 Serlvet 的映射路径  </div><div>         String servletPath = httpServletRequest.getServletPath();</div><div>         System.out.println(servletPath); <span style="color: rgb(50, 135, 18);"> //  /loginServlet   </span></div><div><br/></div><div>     ⑥. 和 attribute 相关的几个方法 （很重要 ，后面讲）</div><div>        </div><div>六、  Http<span style="font-weight: bold;">ServletResponse 常用方法</span></div><div><br/></div><div>     Http<span style="font-weight: bold;">ServletResponse </span>: 封装了响应信息, 如果想给用户什么响应, 具体可以使用该接口的方法实现.</div><div>        ①. *getWriter(): 返回 PrintWriter 对象. 调用该对象的 print() 方法, 将把 print() 中的参数直接打印到客户的浏览器上.</div><div>        ②. 设置响应的内容类型: response.setContentType(&quot;application/msword&quot;);<span style="color: rgb(50, 135, 18);">//word文档类型</span></div><div>        ③. void <span style="color: rgb(227, 0, 0);">sendRedirect</span>(String location): 请求的重定向. (此方法为 HttpServletResponse 中定义.) /代表是站点的目录 ：http://localhost:8080/   </div><div>404 目标找不到</div><div>500 服务器内部错误</div><div><br/></div><div><span style="color: rgb(227, 0, 0);"><b>七、转发和 重定向</b></span></div><div>    都可以将现在的业务转到另外的目录 </div><div>  不同：</div><div>        1）转发是执行了一次请求</div><div>              重定向是执行了两次请求。</div><div>        2）地址栏显示的是 最初访问的目录</div><div>              重定向：地址栏显示的目录是 最终页面的目录</div><div>        3）转发 是服务器内部处理</div><div>             重定向是浏览器又发送了一次请求</div><div>        4）执行的对象不同  转发是请求对象<span style="min-height: 17pt; background: rgb(212, 212, 212);"><font style="font-size: 10pt;">request处理的</font></span></div><div><span style="min-height: 17pt; background: rgb(212, 212, 212);"><font style="font-size: 10pt;">     <span>    </span><span>    </span>重定向是 response处理的。</font></span></div><div><span style="min-height: 17pt; font-size: 15pt; background: rgb(212, 212, 212); font-family: Consolas;"> </span> <span style="min-height: 17pt; background: rgb(212, 212, 212);"><font style="font-size: 10pt;"> 5）代码不同</font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><span style="min-height: 17pt; font-family: Consolas; color: rgb(63, 127, 95);">//将 请求信息转发到另外一个页面</span></font></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">        </span><span style="min-height: 11pt; font-family: Consolas; background: rgb(212, 212, 212); color: rgb(51, 51, 51); text-decoration: underline;">request</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">.getRequestDispatcher(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255);">&quot;/index.jsp&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">).forward(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); background: rgb(212, 212, 212);">request</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62);">response</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">);</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95);">//最终目录：myServlet</span></div><div style="min-height: 17pt;"><span style="min-height: 17pt; font-family: Consolas; color: rgb(51, 51, 51);">         </span><span style="min-height: 17pt; font-family: Consolas; color: rgb(63, 127, 95);">//重定向：重新向另外一个页面发送请求  /代表站点的目录</span></div><div><span style="min-height: 11pt; font-family: Consolas; color: rgb(51, 51, 51);">        </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95);">//response.sendRedirect(path+&quot;/index.jsp&quot;);//最终目录 ：index。</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); text-decoration: underline;">jsp</span></div></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"> 练习：</span></div><hr/><div>    MySql数据库中 ，创建数据表 MyUser ：uid、uname、pwd，并添加测试数据。</div><div>    1）定义一个login.html，定义表单：user、password 提交到 loginServlet</div><div>    2）创建一个LoginServlet（继承自HttpServlet，并重写doPost方法）</div><div>    3）在doPost方法中获取表单数据，并与数据库中数据核对</div><div>    4）信息一致，则页面响应：登录成功  否则显示：用户名或密码错误。</div><hr/><div>        </div><div>JSP:</div><div>一、基本组成：</div><div>1）模板元素：html页面的内容</div><div>2）表达式：&lt;%= 和 %&gt;之中  展示Java内容</div><div>3）Java代码 &lt;%   %&gt;</div><div>4)Java声明：&lt;%！ %&gt;</div><div>5）注释:&lt;%-- 注释信息 --%&gt;</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 