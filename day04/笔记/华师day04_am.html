<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/300104 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="532"/>

<div>
<span><div><div><span style="font-size: 12pt;">华师day04_am</span></div><div><span style="font-size: 12pt;">一、Get请求与Post请求：</span></div><div><span style="font-size: 12pt;">      Get请求：</span></div><div><span style="font-size: 12pt;">                        ①. 在浏览器地址栏中输入某个</span><span style="font-size: 12pt; color: rgb(173, 0, 0);">URL地址或单击网页上的一个超链接时</span><span style="font-size: 12pt;">，浏览器发出的HTTP请求消息的请求方式为GET。</span></div><div><span style="font-size: 12pt;">                        ②. 如果网页中的&lt;form&gt;表单元素的 method 属性被设置为了</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">“GET”</span><span style="font-size: 12pt;">，浏览器提交这个FORM表单时生成的HTTP请求消息的请求方式也为GET。</span></div><div><span style="font-size: 12pt;">                        ③. 使用GET请求方式给WEB服务器传递参数的格式：</span><a href="http://localhost:8080/test01/user?uname=azhu&amp;pwd=123" style="font-size: 12pt;">http://localhost:8080/test01/user?uname=azhu&amp;pwd=123</a></div><div><span style="font-size: 12pt;">                        ④. 使用GET方式传送的数据量一般限制在 1KB 以下。</span></div><div><span style="font-size: 12pt;">                Post请求：</span></div><div><span style="font-size: 12pt;">                        ①. POST 请求方式主要用于向 WEB 服务器端程序提交 FORM 表单中的数据: form 表单的 method 置为 POST</span></div><div><span style="font-size: 12pt;">                        ②. POST 方式将各个表单字段元素及其数据作为 HTTP 消息的实体内容发送给 WEB 服务器，传送的数据量要比使用GET方式传送的数据量大得多。  </span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">二、jsp的九大隐式对象：</span></font></div><div><br/></div><div><span style="font-size: 12pt;">JSP 页面的隐含变量: 没有声明就可以使用的对象. JSP页面一共有 9 个隐含对象.（查看jsp生成的java类，_jspService方法中 可以看到对应隐式对象的声明）</span></div><div><span style="font-size: 12pt;">使用  </span><span style="font-size: 12pt; color: rgb(227, 0, 0);">&lt;% %&gt;</span> <span style="font-size: 12pt;">编写的代码在此位置. 可以用到 request, response, pageContext, session ，application, config, out, page 这 8 个隐含对象. (实际上还可以使用一个叫 exception 的隐含对象)      </span></div><div><span style="font-size: 12pt;">  ①.</span> <span style="font-size: 12pt; color: rgb(227, 0, 0);">request</span><span style="font-size: 12pt;">: HttpServletRequest 的一个对象. *         </span></div><div><span style="font-size: 12pt;">②.</span> <span style="font-size: 12pt; color: rgb(227, 0, 0);">response</span><span style="font-size: 12pt;">: HttpServletResponse 的一个对象(在 JSP 页面中几乎不会调用 response 的任何方法.)       </span></div><div><span style="font-size: 12pt;">③.</span> <span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">pageContext</span><span style="font-size: 12pt;">: 页面的上下文, 是 PageContext 的一个对象. 可以从该对象中</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">获取到其他 8 个隐含对象.</span> <span style="font-size: 12pt;">也可以从中获取到当前页面的其他信息. (学习自定义标签时使用它) *     </span></div><div><span style="font-size: 12pt;">  ④.</span> <span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">session</span><span style="font-size: 12pt;">: 代表浏览器和服务器的一次会话, 是 HttpSession 的一个对象. 后面详细学习. *          </span></div><div><span style="font-size: 12pt;"> ⑤.</span> <span style="font-size: 12pt; color: rgb(227, 0, 0);">application</span><span style="font-size: 12pt;">: 代表当前 WEB 应用. 是 ServletContext 对象. *  可以获取初始化参数。       </span></div><div><span style="font-size: 12pt;"> ⑥. config: 当前 JSP 对应的 Servlet 的 ServletConfig 对象(几乎不使用). 若需要访问当前 JSP 配置的初始化参数 , 需要通过映射的地址才可以.      </span></div><div><span style="font-size: 12pt;">  ⑦. out: JspWriter 对象. 调用 out.println() 可以直接把字符串打印到浏览器上. *        </span></div><div><span style="font-size: 12pt;">  ⑧. page: 指向当前 JSP 对应的 Servlet 对象的引用, 但为 Object 类型, 只能调用 Object 类的方法(几乎不使用)       </span></div><div><span style="font-size: 12pt;"> ⑨. exception: 在声明了 page 指令的 isErrorPage=&quot;true&quot; 时, 才可以使用.</span></div><div><br/></div><div><span style="font-size: 12pt;">    </span><br/></div><div><span style="font-size: 16px;">三、四个作用域</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 12pt;">在application、session、request、pageContext对象中都可以调用</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">setAttribute</span><span style="font-size: 12pt;">方法和</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">getAttribute</span><span style="font-size: 12pt;">方法来设置和检索各自域范围内的属性。</span></div><div><span style="font-size: 12pt;">  页面：pageContext 仅在当前页面有效</span></div><div><span style="font-size: 12pt;">   请求对象：request   在一个请求内有效 （包含转发）</span></div><div><span style="font-size: 12pt;">  会话 ：session  在一个会话内有效  （一个浏览器 与 服务器）</span></div><div><span style="font-size: 12pt;">  应用程序：application  在整个程序内都有效</span></div><div><br/></div><div>能小则小</div><div><br/></div><div>四、指令：</div><div>  1、：page指令</div><div>           a . page指令用于定义JSP页面的各种属性, 无论page指令出现在JSP页面中的什么地方,它作用的都是整个JSP页面, 为了保持程序的可读性和遵循良好的编程习惯, <span style="color: rgb(227, 0, 0);">page指令最好是放在整个JSP页面的起始位置。</span></div><div>            b. page 指令常用的属性:</div><div>                ①. import 属性: 指定当前 JSP 页面对应的 Servlet 需要导入的类.</div><div>                    &lt;%@page import=&quot;java.text.DateFormat&quot;%&gt;</div><div>                ②. session 属性: 取值为 true 或 false, 指定当前页面的 session 隐藏变量是否可用, 也可以说访问当前页面时是否一定要生成 HttpSession对象.</div><div>                    &lt;%@ page session=&quot;false&quot; %&gt;</div><div>                ③. errorPage 和 isErrorPage:</div><div>                    &gt; errorPage 指定若当前页面出现错误的实际响应页面时什么. 其中 / 表示的是当前 WEB 应用的根目录.</div><div>                        &lt;%@ page errorPage=&quot;/error.jsp&quot; %&gt;</div><div>                    &gt; 在响应 error.jsp 时, JSP 引擎使用的请求<span style="color: rgb(227, 0, 0);">转发</span>的方式.    </div><div>                    &gt; isErrorPage 指定当前页面是否为错误处理页面, 可以说明当前页面<span style="color: rgb(227, 0, 0);">是否可以使用 exception 隐藏变量</span>. 需要注意的是: 若指定</div><div>    isErrorPage=&quot;true&quot;, 并使用 exception 的方法了, <span style="color: rgb(227, 0, 0);">一般不建议能够直接访问该页面</span>。</div><div><br/></div><div><span style="font-size: 16px;">五、会话控制</span></div><div><span style="font-size: 16px;">概念</span></div><div><span style="font-size: 12pt;">  1、Cookie</span></div><div><span style="font-size: 12pt;">            Cookie机制采用的是在</span><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">客户端</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">保持Http状态信息的方案</span><span style="font-size: 12pt;">。</span></div><div><span style="font-size: 12pt;">            Cookie实在浏览器访问Web服务器的某个资源时，由</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">Web服务器在Http</span><span style="font-size: 12pt; color: rgb(45, 79, 201);">响应消息头</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">中附带传送给浏览器的一个小文本文件</span><span style="font-size: 12pt;">。</span></div><div><span style="font-size: 12pt;">            一旦Web浏览器保存了某个Cookie，那么它在以后每次访问该Web服务器时，</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">都会在Http</span><span style="font-size: 12pt; color: rgb(45, 79, 201);">请求头</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">中将这个Cookie回传给Web服务器</span><span style="font-size: 12pt;">。</span></div><div><span style="font-size: 12pt;">            底层实现原理：</span></div><div><span style="font-size: 12pt;">                    Web服务器通过在Http响应消息中增加</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">Set-Cookie</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">响应头</span><span style="font-size: 12pt;">字段将Cookie信息发送给浏览器，浏览器通过在Http请求消息中增加</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">Cookie请求头</span><span style="font-size: 12pt;">字段将Cookie回传给Web服务器。</span></div><div><span style="font-size: 12pt;">            一个Cookie只能标识一种信息，它至少含有一个标识信息的名称（name）和设置值（Value）</span></div><div><span style="font-size: 12pt;">            一个Web站点可以给一个Web浏览器发送多个Cookie，一个Web浏览器也可以存储多个Web站点提供的Cookie。</span></div><div><span style="font-size: 12pt;">            浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小限制为4KB。</span></div><div><br style="font-size: 12pt;"/></div><div><span style="font-size: 12pt;">      </span></div><h2><span style="font-size: 10pt;">        2、在Servlet程序中使用Cookie</span></h2><h2><span style="font-size: 12pt;">    </span><span style="font-size: 14px;">    </span><span style="font-size: 14px;"> </span><span style="font-size: 14px;"> ①：</span><span style="font-size: 14px;">Servlet API中提供了一个javax.servlet.http.Cookie类来封装Cookie信息，它包含有生成Cookie信息和提取Cookie信息的各个属性的方法。 </span></h2><div><span style="font-size: 14px;">            ②：HttpServletResponse接口中定义了一个</span><span style="font-size: 14px; color: rgb(255, 0, 0); font-weight: bold;">addCookie</span><span style="font-size: 14px;">方法，它用于在发送给浏览器的HTTP响应消息中增加一个Set-Cookie响应头字段。</span></div><div><span style="font-size: 14px;">            ③：HttpServletRequest接口中定义了一个</span><span style="font-size: 14px; color: rgb(255, 0, 0); font-weight: bold;">getCookies</span><span style="font-size: 14px;">方法，它用于从HTTP请求消息的Cookie请求头字段中读取所有的Cookie项。</span></div><div><span style="font-size: 14px;">        3、Cookie类的方法： </span></div><ul><li><div><span style="font-size: 14px;">构造方法： public Cookie(String name,String value)</span></div></li><li><div><span style="font-size: 14px;">getName方法 </span></div></li><li><div><span style="font-size: 14px;">setValue与getValue方法 </span></div></li><li><div><span style="font-size: 14px;">setMaxAge与getMaxAge方法 </span></div></li><li><div><span style="font-size: 14px;">setPath与getPath方法 </span></div></li></ul><div><font style="font-size: 14pt;"><b>     2、 Session：</b></font></div><div><br/></div><ul><li><div>Session即HttpSession，用来保存用户信息</div></li><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Session的运行机制</span></div></li><ul><li><div>1）在服务器端创建一个Session对象，该对象有一个全称唯一的ID</div></li><li><div>2）在创建Session对象的同时会创建一个特殊的Cookie对象，该Cookie对象的名字是JSESSIONID，该Cookie对象的value值是Session对象的ID值，同时将这个特殊的Cookie对象发送给浏览器</div></li><li><div>3）以后浏览器再发请求就会携带这个特殊的Cookie对象</div></li><li><div>4）服务器根据这个特殊的Cookie对象的value值在服务器中找与之对应的Session对象，以此来区分不同的用户</div></li></ul><li><div>Session对象的创建</div></li><ul><li><div>如果项目中都是HTML页面，只有在Servlet中通过request.getSession()这中方式才能创建Session对象</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         //创建或获取Session对象</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         HttpSession session = request.getSession();</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         //获取Session对象的id</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         String id = session.getId();</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         System.out.println(id);</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         //向Session对象中放一个用户</span></div><div><span style="font-size: 12px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; color: rgb(51, 51, 51);">         session.setAttribute(&quot;user&quot;, &quot;admin&quot;);</span></div></div><ul><li><div>如果项目中是JSP页面，一访问JSP页面就会创建Session对象，该对象是在jsp被翻译成java文件时对应的类的_jspServivce的方法中创建的</div></li><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">在一次会话中只能使用一个Session对象，不管在哪儿获取，得到的都是同一个Session  对象</span></div></li></ul><div><br/></div><div><span style="font-size: 16px;"><span style="font-size: 16px; color: rgb(28, 51, 135); font-weight: bold;">六、el表达式：</span></span></div><div><br/></div><div><span style="font-size: 16px;">  <span style="font-size: 12pt;">1.为什么要使用EL</span></span></div><ul><li><div><span style="font-size: 12pt;">JSP2.0之后不建议使用JSP表达式和JSP脚本片段，建议使用EL代替JSP表达式上，使用JSTL代替JSP脚本片段</span></div></li></ul><div><span style="font-size: 12pt;">2.EL简介</span></div><ul><li><div><span style="font-size: 12pt;">全称：Expression Language，翻译过来叫表达式语言</span></div></li><li><div><span style="font-size: 12pt;">格式：${表达式}</span></div></li><li><div><span style="background-color: rgb(255, 250, 165);font-size: 12pt;-evernote-highlight:true;">EL表达式主要用来将域对象中的属性输出到页面中</span></div></li><li><div><span style="font-size: 12pt;">EL表达式</span><span style="background-color: rgb(255, 250, 165);font-size: 12pt;-evernote-highlight:true;">默认是全域查找</span><span style="font-size: 12pt;">：</span></div></li><ul><li><div><span style="font-size: 12pt;">先从page域中开始查找，找到后直接返回，找不到就去其他三个域中再次查找</span></div></li><li><div><span style="font-size: 12pt;">如果在application域中还是没有找到，</span><span style="background-color: rgb(255, 250, 165);font-size: 12pt;-evernote-highlight:true;">就直接返回空串</span></div></li></ul><li><div><span style="font-size: 12pt;">如何精确查找域中的属性：</span></div></li><ul><li><div><span style="font-size: 12pt;">EL给我们提供了四个Scope对象，用来精确获取对应的域中的属性值，这四个Scope对象相当于将四个域中的域单独拿了出来</span></div></li><ul><li><div><span style="font-size: 12pt;">pageScope</span></div></li><ul><li><div><span style="font-size: 12pt;">获取page域中的属性值</span></div></li></ul><li><div><span style="font-size: 12pt;">requestScope</span></div></li><ul><li><div><span style="font-size: 12pt;">获取request域中的属性值</span></div></li></ul><li><div><span style="font-size: 12pt;">sessionScope</span></div></li><ul><li><div><span style="font-size: 12pt;">获取session域中的属性值</span></div></li></ul><li><div><span style="font-size: 12pt;">applicationScope</span></div></li><ul><li><div><span style="font-size: 12pt;">获取application域中的属性值</span></div></li></ul></ul></ul></ul><div><br/></div><div><img src="华师day04_am_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;"/></div><div>如：从session中读取 uname  可以 ${uname}  也可以指定范围：${sessionScope.uname}</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 